{"version":3,"sources":["components/Avatar.js","components/RepoDetails.js","components/Row.js","containers/InfiniteScroll.js","containers/useLoadMore.js","containers/App.js","index.js"],"names":["Avatar","owner","avatar_url","login","className","alt","src","RepoDetails","repoData","description","open_issues_count","name","html_url","stargazers_count","created_at","dateDifference","Math","floor","Date","href","RowList","InfiniteScroll","useState","page","setPage","loading","setLoading","error","setError","metaData","setMetaData","reachedFinalPage","setReachedFinalPage","useEffect","date","getDateFromThirtyDays","fetch","then","response","status","json","data","oldDataItems","items","catch","err","todayMinusThirty","setDate","getDate","dd","String","padStart","mm","getMonth","getFullYear","useLoadMore","observer","useRef","lastRepoElementRef","useCallback","element","current","disconnect","IntersectionObserver","entries","isIntersecting","oldPage","observe","rowList","map","item","index","length","Row","ref","id","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.443dad15.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Avatar({owner}){\r\n    const {avatar_url, login} = owner;\r\n    return(\r\n        <div className=\"dtc pa3 v-mid h-mid\">\r\n            <img \r\n            alt={login}\r\n            src={avatar_url} \r\n            className = \"br4 h-100 avatar\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Avatar;","import React from 'react';\r\n\r\n\r\nfunction RepoDetails({repoData,owner}){\r\n    const {description, open_issues_count, name, html_url, stargazers_count,created_at} = repoData;\r\n\r\n    const dayInMilliseconds = 60*60*24*1000;\r\n    const dateDifference = Math.floor((new Date() - new Date(created_at))/ dayInMilliseconds);\r\n\r\n    return(\r\n        <div className=\"dtc v-top pl3-ns pa1 w-80-ns w-70 w-90-l\">\r\n            <h1 className=\"lh-copy mv0 v-top f1-ns f4\">\r\n                <a className='dark-gray' href={html_url}>{name}</a>\r\n            </h1>\r\n            <h2 className='f4-ns f6 ma2-ns ma2'>{description}</h2>\r\n            <div className='dib mt2 mt3-ns'>\r\n                <p className='ba bw1 pa1 mv2-ns ma1 di f5 br2'>{`Stars: ${stargazers_count}`}</p>\r\n                <p className='ba bw1 pa1 mv2-ns ma1 di f5 br2'>{`Issues: ${open_issues_count}`}</p>\r\n            </div>\r\n            <div className='dib'> \r\n                <p className='pa1 f5-ns f7'>\r\n                    <span>{`Submitted ${dateDifference} days ago by `}</span>\r\n                    <a href={owner.html_url}>{owner.login}</a>               \r\n                </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RepoDetails;","import React from 'react';\r\nimport Avatar from'./Avatar';\r\nimport RepoDetails from './RepoDetails';\r\n\r\n\r\nfunction RowList({repoData,owner}){\r\n    return(\r\n        <div className=\"dt pv2 pv2-m pv2-ns w-95 bg-light-gray br4 shadow-3 ma3 grow\">\r\n            <Avatar owner={owner} />\r\n            <RepoDetails repoData={repoData} owner={owner}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RowList;","import React, { useState, useRef, useCallback } from 'react';\r\nimport Row from '../components/Row';\r\nimport useLoadMore from './useLoadMore';\r\n\r\nconst InfiniteScroll = () => {\r\n    // tracking on which page we currently are\r\n    const [page, setPage] = useState(1);\r\n\r\n    // Destructuring output states from useLoadMore Hook\r\n    const { loading, error, metaData, reachedFinalPage } = useLoadMore(page)\r\n    // add observer refrence \r\n    const observer = useRef(null);\r\n    //Callback function reattach last element in each page to observer reference\r\n    const lastRepoElementRef = useCallback(element => {\r\n        if (loading) return // exit here if it's still loading to avoid multiple api calls\r\n        if (observer.current) observer.current.disconnect();\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if (entries[0].isIntersecting && !reachedFinalPage) {\r\n                setPage(oldPage => oldPage + 1)\r\n            }\r\n        })\r\n        if (element) observer.current.observe(element)\r\n    }, [loading, reachedFinalPage])\r\n\r\n    //the final rendered array \r\n    //P.S. it's not a component on its own as we need to pass the observer reference in this context. Unless we use forwardRef which might have caused a breaking change(https://reactjs.org/docs/forwarding-refs.html#note-for-component-library-maintainers)\r\n    const rowList = metaData.map((item, index) => {\r\n        if (metaData.length === index + 1) {\r\n            //checking if it's the last row in page to attach observer to it\r\n            if (error) {\r\n                return <h1> ERROR</h1>\r\n            } // checking if there is an error to prevent the load more component from rendering\r\n\r\n            //using repo id as key for each iteration\r\n            return (\r\n                <div key={item.id}>\r\n                    <Row repoData={item} owner={item.owner} />\r\n                    <h1 className='f2 gray tc' ref={lastRepoElementRef}>Loading More...</h1>\r\n                </div>\r\n            )\r\n        }\r\n        return <Row key={item.id} repoData={item} owner={item.owner} />\r\n\r\n    })\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            {rowList}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfiniteScroll;","import { useEffect, useState } from 'react';\r\n\r\nexport default function useLoadMore(page) {\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(false);\r\n    const [metaData, setMetaData] = useState([]); \r\n    const [reachedFinalPage, setReachedFinalPage] = useState(false)\r\n\r\n    useEffect(() => { \r\n        // here we fetching new repos then adding to List\r\n        setLoading(true);\r\n        const date = getDateFromThirtyDays();\r\n        fetch(`https://api.github.com/search/repositories?q=created:%3E${date}&sort=stars&order=desc&page=${page}`)\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    return response.json()\r\n                }\r\n                if (response.status === 403) {\r\n                    setError(true)\r\n                }\r\n            })\r\n            .then((data) => setMetaData(oldDataItems => {\r\n                return [...oldDataItems, ...data.items]\r\n            }))\r\n            .then(() =>{\r\n                if (page > 33) { //if reached the maximum limil of pages allowed by github api\r\n                    setReachedFinalPage(true);\r\n                }\r\n            })\r\n            .then(setLoading(false))\r\n            .catch(err=>setError(true));\r\n    },[page])\r\n\r\n    const getDateFromThirtyDays = ()=>{\r\n        const todayMinusThirty = new Date();//It starts as today\r\n        todayMinusThirty.setDate(todayMinusThirty.getDate()-30);//But we remove 30 days here\r\n        const dd = String(todayMinusThirty.getDate()).padStart(2, '0');\r\n        const mm = String(todayMinusThirty.getMonth()+1).padStart(2, '0'); \r\n        const yyyy = todayMinusThirty.getFullYear();\r\n        const thirtyDaysAgo = yyyy+'-'+mm+'-'+dd;//putting the date in the correct query format \r\n        return thirtyDaysAgo;\r\n    }\r\n    return {loading, error, metaData, reachedFinalPage}\r\n}","import React from 'react';\r\nimport InfiniteScroll from './InfiniteScroll';\r\n\r\n\r\nfunction App() {\r\n    \r\n  return (\r\n    <div className=\"App\">\r\n        <InfiniteScroll />\r\n    </div>\r\n  )\r\n}\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './containers/App.js';\nimport 'tachyons';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}